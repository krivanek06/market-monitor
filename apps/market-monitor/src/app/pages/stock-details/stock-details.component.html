<div class="mb-10 text-lg">loading: {{ loadingSignal() }}</div>

<ng-container *ngIf="stockDetailsSignal() as stockDetailsSignal">
  <div class="grid mb-6 lg:grid-cols-3 gap-x-6 gap-y-4">
    <!-- rating table -->
    <app-general-card title="Rating">
      <app-stock-rating-table [data]="companyRatingSignal()"></app-stock-rating-table>
    </app-general-card>

    <!-- recommendation -->
    <app-general-card title="Recommendation">
      <app-stock-recommendation
        [heightPx]="363"
        [data]="stockDetailsSignal.recommendationTrends"
      ></app-stock-recommendation>
    </app-general-card>

    <!-- return on something -->
    <app-general-card title="Return on">
      <app-generic-chart
        chartType="column"
        [heightPx]="363"
        [showTooltipHeader]="false"
        [series]="[
          {
            colorByPoint: true,
            additionalData: {
              colorTooltipDefault: true,
              showPercentageSign: true,
            },
            data: [
              { name: 'Equity', y: stockDetailsSignal.ratio.returnOnEquityTTM * 100 },
              { name: 'Assets', y: stockDetailsSignal.ratio.returnOnAssetsTTM * 100 },
              { name: 'Tangible Assets', y: stockDetailsSignal.companyKeyMetricsTTM.returnOnTangibleAssetsTTM * 100 },
              { name: 'Capital Employed', y: stockDetailsSignal.ratio.returnOnCapitalEmployedTTM * 100 },
              { name: 'Invested Capital', y: stockDetailsSignal.companyKeyMetricsTTM.roicTTM * 100 },
            ]
          }
        ]"
        [showDataLabel]="true"
      >
      </app-generic-chart>
    </app-general-card>
  </div>

  <div>
    <app-general-card title="Insider trades">
      <app-stock-insider-trades [data]="stockDetailsSignal.companyOutlook.insideTrades"></app-stock-insider-trades>
    </app-general-card>
  </div>
</ng-container>
