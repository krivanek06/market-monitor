<ng-container *ngIf="marketOverviewSignal() as marketOverviewSignalValues">
  <div class="flex gap-3 p-2 mb-6 xl:justify-around md:grid-cols-2 max-md:overflow-x-scroll md:grid xl:flex">
    <ng-container *ngIf="marketTopIndexQuotesSignal() as marketTopIndexQuotesSignal">
      <app-general-card
        *ngFor="let index of marketTopIndexQuotesSignal"
        [title]="index.name"
        additionalClasses="min-w-max px-6 py-3"
      >
        <div class="flex items-center justify-center gap-3 text-base">
          <span>{{ index.quote.price | number : '1.2-2' }}</span>
          <span
            appPercentageIncrease
            [useCurrencySign]="false"
            [changeValues]="{
              change: index.quote.change,
              changePercentage: index.quote.changesPercentage,
          }"
          ></span>
        </div>
      </app-general-card>
    </ng-container>
  </div>

  <div class="flex max-sm:w-full">
    <app-quote-search-basic
      [formControl]="selectedIndexSymbolQuoteControl"
      class="min-w-[300px] max-sm:w-full"
      type="index"
    ></app-quote-search-basic>
  </div>

  <div class="mb-10">
    <app-asset-price-chart-interactive
      priceName="Value"
      [priceShowSign]="false"
      [symbol]="selectedIndexSymbolQuoteControl.value?.symbol ?? SYMBOL_SP500"
      [chartHeightPx]="350"
      [displayVolume]="false"
      [title]="selectedIndexSymbolQuoteControl.value?.name ?? 'S&P 500'"
    ></app-asset-price-chart-interactive>
  </div>

  <div class="w-full mx-auto max-sm:pr-3 lg:w-11/12">
    <h2>SP500 stats</h2>
    <div class="grid grid-cols-1 mb-10 sm:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-3">
      <app-generic-chart
        [chartTitle]="marketOverviewSignalValues.sp500.peRatio.name"
        [heightPx]="275"
        [applyFancyColor]="2"
        [series]="[marketOverviewSignalValues.sp500.peRatio.chartData]"
      ></app-generic-chart>

      <app-generic-chart
        [chartTitle]="marketOverviewSignalValues.sp500.shillerPeRatio.name"
        [heightPx]="275"
        [applyFancyColor]="2"
        [series]="[marketOverviewSignalValues.sp500.shillerPeRatio.chartData]"
      ></app-generic-chart>

      <app-generic-chart
        [chartTitle]="marketOverviewSignalValues.sp500.priceToBook.name"
        [heightPx]="275"
        [applyFancyColor]="2"
        [series]="[marketOverviewSignalValues.sp500.priceToBook.chartData]"
      ></app-generic-chart>

      <app-generic-chart
        [chartTitle]="marketOverviewSignalValues.sp500.priceToSales.name"
        [heightPx]="275"
        [applyFancyColor]="2"
        [series]="[marketOverviewSignalValues.sp500.priceToSales.chartData]"
      ></app-generic-chart>

      <app-generic-chart
        [chartTitle]="marketOverviewSignalValues.sp500.earningsYield.name"
        [heightPx]="275"
        [applyFancyColor]="2"
        [series]="[marketOverviewSignalValues.sp500.earningsYield.chartData]"
      ></app-generic-chart>

      <app-generic-chart
        [chartTitle]="marketOverviewSignalValues.sp500.dividendYield.name"
        [heightPx]="275"
        [applyFancyColor]="2"
        [series]="[marketOverviewSignalValues.sp500.dividendYield.chartData]"
      ></app-generic-chart>
    </div>

    <h2>Inflation Rate</h2>
    <div class="grid grid-cols-1 gap-4 mb-10 sm:grid-cols-2 lg:grid-cols-4">
      <app-generic-chart
        [chartTitle]="marketOverviewSignalValues.inflationRate.usInflationRate.name"
        [heightPx]="250"
        [series]="[marketOverviewSignalValues.inflationRate.usInflationRate.chartData]"
      ></app-generic-chart>

      <app-generic-chart
        [chartTitle]="marketOverviewSignalValues.inflationRate.euInflationRate.name"
        [heightPx]="250"
        [series]="[marketOverviewSignalValues.inflationRate.euInflationRate.chartData]"
      ></app-generic-chart>

      <app-generic-chart
        [chartTitle]="marketOverviewSignalValues.inflationRate.ukInflationRate.name"
        [heightPx]="250"
        [series]="[marketOverviewSignalValues.inflationRate.ukInflationRate.chartData]"
      ></app-generic-chart>

      <app-generic-chart
        [chartTitle]="marketOverviewSignalValues.inflationRate.gerInflationRate.name"
        [heightPx]="250"
        [series]="[marketOverviewSignalValues.inflationRate.gerInflationRate.chartData]"
      ></app-generic-chart>
    </div>

    <h2>Treasury</h2>
    <div class="grid grid-cols-1 mb-10 sm:grid-cols-2 lg:grid-cols-4 gap-x-6 gap-y-3">
      <app-generic-chart
        [chartTitle]="marketOverviewSignalValues.treasury.us3Month.name"
        [heightPx]="250"
        [series]="[marketOverviewSignalValues.treasury.us3Month.chartData]"
      ></app-generic-chart>

      <app-generic-chart
        [chartTitle]="marketOverviewSignalValues.treasury.us1Year.name"
        [heightPx]="250"
        [series]="[marketOverviewSignalValues.treasury.us1Year.chartData]"
      ></app-generic-chart>

      <app-generic-chart
        [chartTitle]="marketOverviewSignalValues.treasury.us10Year.name"
        [heightPx]="250"
        [series]="[marketOverviewSignalValues.treasury.us10Year.chartData]"
      ></app-generic-chart>

      <app-generic-chart
        [chartTitle]="marketOverviewSignalValues.treasury.us30Year.name"
        [heightPx]="250"
        [series]="[marketOverviewSignalValues.treasury.us30Year.chartData]"
      ></app-generic-chart>
    </div>

    <h2>Bonds</h2>
    <div class="grid grid-cols-1 gap-4 mb-3 sm:grid-cols-2 lg:grid-cols-4">
      <app-generic-chart
        [chartTitle]="marketOverviewSignalValues.bonds.usAAAYield.name"
        [heightPx]="250"
        [series]="[marketOverviewSignalValues.bonds.usAAAYield.chartData]"
      ></app-generic-chart>
      <app-generic-chart
        [chartTitle]="marketOverviewSignalValues.bonds.usAAYield.name"
        [heightPx]="250"
        [series]="[marketOverviewSignalValues.bonds.usAAYield.chartData]"
      ></app-generic-chart>
      <app-generic-chart
        [chartTitle]="marketOverviewSignalValues.bonds.usBBYield.name"
        [heightPx]="250"
        [series]="[marketOverviewSignalValues.bonds.usBBYield.chartData]"
      ></app-generic-chart>
      <app-generic-chart
        [chartTitle]="marketOverviewSignalValues.bonds.usCCCYield.name"
        [heightPx]="250"
        [series]="[marketOverviewSignalValues.bonds.usCCCYield.chartData]"
      ></app-generic-chart>
    </div>

    <h2>Consumer Price Index</h2>
    <div class="grid grid-cols-1 gap-4 mb-10 sm:grid-cols-2 lg:grid-cols-4">
      <app-generic-chart
        [chartTitle]="marketOverviewSignalValues.consumerIndex.usCpi.name"
        [heightPx]="250"
        [series]="[marketOverviewSignalValues.consumerIndex.usCpi.chartData]"
      ></app-generic-chart>

      <app-generic-chart
        [chartTitle]="marketOverviewSignalValues.consumerIndex.euCpi.name"
        [heightPx]="250"
        [series]="[marketOverviewSignalValues.consumerIndex.euCpi.chartData]"
      ></app-generic-chart>

      <app-generic-chart
        [chartTitle]="marketOverviewSignalValues.consumerIndex.ukCpi.name"
        [heightPx]="250"
        [series]="[marketOverviewSignalValues.consumerIndex.ukCpi.chartData]"
      ></app-generic-chart>

      <app-generic-chart
        [chartTitle]="marketOverviewSignalValues.consumerIndex.gerCpi.name"
        [heightPx]="250"
        [series]="[marketOverviewSignalValues.consumerIndex.gerCpi.chartData]"
      ></app-generic-chart>
    </div>
  </div>
</ng-container>

<!-- skeleton loading -->
<ng-container *ngIf="!(marketOverviewSignal() && marketTopIndexQuotesSignal())">
  <app-page-market-overview-skeleton></app-page-market-overview-skeleton>
</ng-container>
