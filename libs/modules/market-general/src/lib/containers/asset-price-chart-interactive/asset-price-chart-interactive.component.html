<!-- time period form control -->
<div class="mb-4">
  <app-time-period-buttons [formControl]="timePeriodFormControl"></app-time-period-buttons>
</div>

<ng-container *ngIf="!loadingSignal(); else chartSkeleton">
  <ng-container *ngIf="stockHistoricalPrice() as historicalPrice">
    <!-- time data about chart -->
    <div class="flex justify-end md:justify-between text-wt-gray-medium">
      <div class="items-center hidden gap-2 md:flex">
        <img *ngIf="imageName" appDefaultImg imageType="symbol" [src]="imageName" alt="Asset Image" class="w-6 h-6" />
        <span>{{ title }}</span>
      </div>
      <span *ngIf="historicalPrice.length > 0" class="block">
        {{ historicalPrice[0].date | date: 'MMMM d, y' }} -
        {{ historicalPrice[historicalPrice.length - 1].date | date: 'MMMM d, y' }}
      </span>
    </div>

    <!-- price & volume chart -->
    <app-asset-price-chart
      [period]="timePeriodFormControl.value"
      [priceShowSign]="priceShowSign"
      [priceName]="priceName"
      [displayVolume]="displayVolume"
      [historicalPrice]="historicalPrice"
      [heightPx]="chartHeightPx"
    ></app-asset-price-chart>
  </ng-container>
</ng-container>

<!-- skeleton chart -->
<ng-template #chartSkeleton>
  <!-- chart title and date range -->
  <div class="flex justify-end mb-3 md:justify-between max-sm:pl-4">
    <div class="g-skeleton sm:w-[125px] h-6"></div>
    <div class="g-skeleton w-[350px] h-6"></div>
  </div>

  <div appClientStyles [appHeight]="chartHeightPx - 35" class="g-skeleton"></div>
</ng-template>
