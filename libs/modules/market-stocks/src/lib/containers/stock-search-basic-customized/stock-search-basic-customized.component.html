<app-stock-search-basic
  appElementFocus
  (insideClick)="checkToDisplayOverlay(true, null)"
  (inputHasValue)="checkToDisplayOverlay(null, $event)"
  [formControl]="searchControl"
  cdkOverlayOrigin
  #trigger
  #origin="cdkOverlayOrigin"
></app-stock-search-basic>

<ng-template
  cdkConnectedOverlay
  cdkConnectedOverlayBackdropClass="cdk-overlay-transparent-backdrop"
  [cdkConnectedOverlayMinWidth]="overlayWidth()"
  [cdkConnectedOverlayOrigin]="origin"
  [cdkConnectedOverlayOpen]="overlayIsOpen().isInputFocused && !overlayIsOpen().inputHasValue"
>
  <div
    [style.max-width.px]="overlayWidth() - 20"
    [style.min-width.px]="overlayWidth() - 20"
    appElementFocus
    (outsideClick)="checkToDisplayOverlay(false, null)"
    class="min-h-[200px] max-h-[400px] bg-wt-gray-light -mt-4 w-full rounded-md mx-auto overflow-y-scroll p-3 shadow-md"
  >
    <!-- checkbox changing displayed stock summaries -->
    <div class="flex items-center justify-between mb-1">
      <span class="text-base text-wt-gray-medium">
        <ng-container *ngIf="!showFavoriteStocks.value">Last Searched</ng-container>
        <ng-container *ngIf="showFavoriteStocks.value">Favorite Stocks</ng-container>
      </span>
      <mat-checkbox color="primary" [formControl]="showFavoriteStocks"> Show Favorites </mat-checkbox>
    </div>

    <!-- display summaries as buttons -->
    <button
      mat-button
      *ngFor="let summary of displayedStocksSignal()"
      (click)="onSummaryClick(summary)"
      class="w-full h-12"
      type="button"
    >
      <app-quote-item
        [symbolQuote]="summary.quote"
        [assetUrl]="summary.profile?.image"
        [displaySecondLine]="false"
      ></app-quote-item>
    </button>
  </div>
</ng-template>
