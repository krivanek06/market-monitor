<app-dialog-close-header [showCloseButton]="false" title="Create Group"></app-dialog-close-header>
<!-- form -->
<form [formGroup]="form" (ngSubmit)="onFormSubmit()">
  <mat-dialog-content *ngIf="!loaderSignal(); else showLoader">
    <div class="flex gap-4">
      <!-- upload image -->
      <div class="w-[250px] h-[250px]">
        <app-upload-image-single-control
          filePath="groups"
          formControlName="uploadedImage"
        ></app-upload-image-single-control>
      </div>

      <!-- additional forms -->
      <div class="flex-1">
        <!-- group name -->
        <app-form-mat-input-wrapper
          formControlName="groupName"
          inputCaption="Group Name"
          inputType="TEXT"
        ></app-form-mat-input-wrapper>

        <!-- is public -->
        <app-form-mat-input-wrapper
          formControlName="isPublic"
          inputCaption="Is Group Public"
          inputType="CHECKBOX"
          hintText="If selected people can request be member of a group"
        ></app-form-mat-input-wrapper>

        <!-- add owner as member -->
        <app-form-mat-input-wrapper
          formControlName="isOwnerMember"
          inputCaption="Add owner as member"
          inputType="CHECKBOX"
          hintText="If selected the owner will be added as a member of the group"
        ></app-form-mat-input-wrapper>
      </div>
    </div>

    <!-- invite member -->
    <div class="my-8 text-lg">Invite People</div>

    <!-- search user control -->
    <div class="max-w-[450px] mb-8">
      <app-user-search-control [formControl]="searchUserControl"></app-user-search-control>
    </div>

    <!-- display selected users -->
    <div class="flex flex-wrap gap-4">
      <div *ngFor="let user of selectedUsersSignal()" class="flex gap-4 p-4 shadow-md">
        <app-user-display-item [userData]="user"></app-user-display-item>
        <button mat-icon-button type="button" matTooltip="Remove User" (click)="onUserRemove(user)">
          <mat-icon color="warn">delete</mat-icon>
        </button>
      </div>
    </div>
  </mat-dialog-content>

  <div class="my-4">
    <mat-divider></mat-divider>
  </div>

  <mat-dialog-actions *ngIf="!loaderSignal()">
    <div class="g-mat-dialog-actions-end">
      <button mat-flat-button mat-dialog-close type="button">Cancel</button>
      <button type="submit" mat-flat-button color="primary">Save</button>
    </div>
  </mat-dialog-actions>
</form>

<!-- loader -->
<ng-template #showLoader>
  <div class="grid gap-5 py-16 place-content-center">
    <mat-spinner [diameter]="100" class="m-auto"></mat-spinner>
    <div class="text-center text-wt-gray-medium">This may time a while. Please wait...</div>
  </div>
</ng-template>
